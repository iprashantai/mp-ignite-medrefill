<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Medication Adherence Technical Handoff</title>
  <style>
    /* Default styles provided by pandoc.
    ** See https://pandoc.org/MANUAL.html#variables-for-html for config info.
    */
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/5.2.0/github-markdown.min.css" />
</head>
<body>
<header id="title-block-header">
<h1 class="title">Medication Adherence Technical Handoff</h1>
</header>
<h1 id="medication-adherence-technical-handoff-document">Medication
Adherence Technical Handoff Document</h1>
<p><strong>Date:</strong> January 3, 2026 <strong>Status:</strong>
VALIDATED - Ready for Engineering <strong>Golden Standard
Reference:</strong> <code>src/pages/MetricsReference.jsx</code></p>
<hr />
<h2 id="document-hierarchy">Document Hierarchy</h2>
<table>
<colgroup>
<col style="width: 34%" />
<col style="width: 34%" />
<col style="width: 31%" />
</colgroup>
<thead>
<tr>
<th>Priority</th>
<th>Document</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td><code>src/pages/MetricsReference.jsx</code></td>
<td>AUTHORITATIVE SOURCE - All implementations must follow this</td>
</tr>
<tr>
<td>2</td>
<td><code>docs/PRD_ALL_PATIENTS_REFILL_WORKLIST.md</code></td>
<td>Product Requirements</td>
</tr>
<tr>
<td>3</td>
<td><code>docs/Medication_Adherence_Metrics_Reference_Guide.md</code></td>
<td>User-facing reference</td>
</tr>
<tr>
<td>4</td>
<td><code>docs/planning/Medication_Adherence_Prioritization_Implementation.md</code></td>
<td>FUTURE enhancements (not current spec)</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="part-1-core-formulas-golden-standard">Part 1: Core Formulas
(Golden Standard)</h2>
<h3 id="pdc-calculation">PDC Calculation</h3>
<pre><code>PDC = (Covered Days / Treatment Days) x 100</code></pre>
<table>
<thead>
<tr>
<th>Term</th>
<th>Definition</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Covered Days</strong></td>
<td>Days with medication on hand</td>
</tr>
<tr>
<td><strong>Treatment Days</strong></td>
<td>First fill date -&gt; December 31</td>
</tr>
</tbody>
</table>
<h3 id="status-thresholds">Status Thresholds</h3>
<table>
<thead>
<tr>
<th>Status</th>
<th>Range</th>
<th>Color</th>
</tr>
</thead>
<tbody>
<tr>
<td>Pass</td>
<td>PDC &gt;= 80%</td>
<td>Green</td>
</tr>
<tr>
<td>Caution</td>
<td>60% &lt;= PDC &lt; 80%</td>
<td>Yellow</td>
</tr>
<tr>
<td>Fail</td>
<td>PDC &lt; 60%</td>
<td>Red</td>
</tr>
</tbody>
</table>
<h3 id="gap-days-formulas">Gap Days Formulas</h3>
<pre><code>Gap Days Used     = Treatment Days - Covered Days
Gap Days Allowed  = Treatment Days x 20%
Gap Days Remaining = Gap Days Allowed - Gap Days Used</code></pre>
<h3 id="delay-budget">Delay Budget</h3>
<pre><code>Delay Budget = Gap Days Remaining / Refills Needed</code></pre>
<hr />
<h2 id="part-2-fragility-tiers">Part 2: Fragility Tiers</h2>
<table>
<thead>
<tr>
<th>Tier</th>
<th>Name</th>
<th>Delay Budget</th>
<th>Contact Window</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>COMPLIANT</strong></td>
<td>Pass</td>
<td>PDC Status Quo &gt;= 80%</td>
<td>-</td>
</tr>
<tr>
<td><strong>F5</strong></td>
<td>Safe</td>
<td>&gt; 20 days per refill</td>
<td>Monthly</td>
</tr>
<tr>
<td><strong>F4</strong></td>
<td>Stable</td>
<td>11-20 days per refill</td>
<td>2 weeks</td>
</tr>
<tr>
<td><strong>F3</strong></td>
<td>Moderate</td>
<td>6-10 days per refill</td>
<td>1 week</td>
</tr>
<tr>
<td><strong>F2</strong></td>
<td>Fragile</td>
<td>3-5 days per refill</td>
<td>48 hours</td>
</tr>
<tr>
<td><strong>F1</strong></td>
<td>Critical</td>
<td>&lt;= 2 days per refill</td>
<td>24 hours</td>
</tr>
<tr>
<td><strong>T5</strong></td>
<td>Lost</td>
<td>PDC Perfect &lt; 80%</td>
<td>N/A</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="part-3-priority-scoring">Part 3: Priority Scoring</h2>
<h3 id="base-scores">Base Scores</h3>
<table>
<thead>
<tr>
<th>Tier</th>
<th>Points</th>
</tr>
</thead>
<tbody>
<tr>
<td>Critical (F1)</td>
<td>100 pts</td>
</tr>
<tr>
<td>Fragile (F2)</td>
<td>80 pts</td>
</tr>
<tr>
<td>Moderate (F3)</td>
<td>60 pts</td>
</tr>
<tr>
<td>Stable (F4)</td>
<td>40 pts</td>
</tr>
<tr>
<td>Safe (F5)</td>
<td>20 pts</td>
</tr>
</tbody>
</table>
<h3 id="bonus-points">Bonus Points</h3>
<table>
<thead>
<tr>
<th>Condition</th>
<th>Points</th>
</tr>
</thead>
<tbody>
<tr>
<td>Out of Medication</td>
<td>+30 pts</td>
</tr>
<tr>
<td>Q4 (Oct-Dec)</td>
<td>+25 pts</td>
</tr>
<tr>
<td>Multiple MA Measures</td>
<td>+15 pts</td>
</tr>
<tr>
<td>New Patient</td>
<td>+10 pts</td>
</tr>
</tbody>
</table>
<h3 id="urgency-index">Urgency Index</h3>
<table>
<thead>
<tr>
<th>Level</th>
<th>Score Range</th>
</tr>
</thead>
<tbody>
<tr>
<td>Extreme</td>
<td>150+ pts</td>
</tr>
<tr>
<td>High</td>
<td>100-149 pts</td>
</tr>
<tr>
<td>Moderate</td>
<td>50-99 pts</td>
</tr>
<tr>
<td>Low</td>
<td>&lt;50 pts</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="part-4-two-dimensional-prioritization">Part 4: Two-Dimensional
Prioritization</h2>
<h3 id="dimension-1-urgency-supply-status">Dimension 1: Urgency (Supply
Status)</h3>
<p><em>“How soon do we need to act?”</em></p>
<table>
<thead>
<tr>
<th>Supply Status</th>
<th>Urgency</th>
</tr>
</thead>
<tbody>
<tr>
<td>Out of Meds</td>
<td>Urgent</td>
</tr>
<tr>
<td>&lt;= 7 Days Left</td>
<td>Soon</td>
</tr>
<tr>
<td>&gt; 7 Days Left</td>
<td>Can Wait</td>
</tr>
</tbody>
</table>
<h3 id="dimension-2-fragility-gap-day-budget">Dimension 2: Fragility
(Gap Day Budget)</h3>
<p><em>“How much room for error do they have?”</em></p>
<table>
<thead>
<tr>
<th>Fragility</th>
<th>Resilience</th>
</tr>
</thead>
<tbody>
<tr>
<td>F1-F2 (0-5 days/refill)</td>
<td>Very Fragile</td>
</tr>
<tr>
<td>F3-F5 (6+ days/refill)</td>
<td>More Resilient</td>
</tr>
</tbody>
</table>
<h3 id="priority-matrix">Priority Matrix</h3>
<table>
<thead>
<tr>
<th></th>
<th>Out of Meds</th>
<th>&lt;= 7 Days</th>
<th>&gt; 7 Days</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>F1-F2</strong></td>
<td>CRITICAL</td>
<td>HIGH</td>
<td>WATCH</td>
</tr>
<tr>
<td><strong>F3-F5</strong></td>
<td>MEDIUM</td>
<td>WATCH</td>
<td>LOW</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="part-5-refill-vs-renewal-decision-logic">Part 5: Refill vs
Renewal Decision Logic</h2>
<h3 id="decision-flowchart">Decision Flowchart</h3>
<pre><code>                    PATIENT NEEDS MEDICATION
                            |
                            v
                   Has Refills Remaining?
                      /            \
                    YES             NO
                    /                \
                   v                  v
            Rx Expired?        Recent Visit (&lt;=90 days)?
             /      \              /           \
           NO       YES          YES           NO
           /          \          /              \
          v            v        v                v
       REFILL      RENEWAL   RENEWAL     APPOINTMENT_NEEDED
      (FR-3.1.1)  (FR-3.1.2) (FR-3.1.3)     (FR-3.1.4)</code></pre>
<h3 id="logic-table-prd-fr-3.1">Logic Table (PRD FR-3.1)</h3>
<table>
<colgroup>
<col style="width: 37%" />
<col style="width: 31%" />
<col style="width: 31%" />
</colgroup>
<thead>
<tr>
<th>Condition</th>
<th>Outcome</th>
<th>PRD Ref</th>
</tr>
</thead>
<tbody>
<tr>
<td>Refills remaining + Rx NOT expired</td>
<td>REFILL</td>
<td>FR-3.1.1</td>
</tr>
<tr>
<td>Refills remaining + Rx expired</td>
<td>RENEWAL</td>
<td>FR-3.1.2</td>
</tr>
<tr>
<td>No refills + Recent visit (&lt;=90 days)</td>
<td>RENEWAL</td>
<td>FR-3.1.3</td>
</tr>
<tr>
<td>No refills + No recent visit (&gt;90 days)</td>
<td>APPOINTMENT_NEEDED</td>
<td>FR-3.1.4</td>
</tr>
</tbody>
</table>
<hr />
<h2
id="part-6-critical-clarification---pdc-tracks-fills-not-prescriptions">Part
6: Critical Clarification - PDC Tracks FILLS, Not Prescriptions</h2>
<h3 id="key-insight">Key Insight</h3>
<p><strong>PDC doesn’t care about prescriptions. PDC only cares about
fills.</strong></p>
<pre><code>What Doctor Does          What Pharmacy Records       What PDC Sees
-----------------         --------------------        -------------

Day 1: Writes Rx          Day 1: Fill #1              [COVERED]

                          Day 90: Fill #2             [COVERED]

Day 150: Writes           (no fill yet)               (still covered from
  NEW Rx                                               previous fill)

                          Day 180: Fill #3            [COVERED]
                          (new dose)

PDC only cares about Fill dates -&gt; Continuous coverage = Good PDC</code></pre>
<h3 id="implication-for-dose-changes">Implication for Dose Changes</h3>
<p>When a prescriber writes a new prescription for a different strength
(e.g., Metformin 500mg -&gt; 1000mg): - <strong>PDC doesn’t see
this</strong> - only fills matter - System’s job is to ensure
<strong>fills happen on time</strong> based on Days to Runout - Existing
runout-based alerting covers this scenario - No special handling needed
for strength/formulation changes</p>
<hr />
<h2 id="part-7-the-three-cms-measures">Part 7: The Three CMS
Measures</h2>
<table>
<colgroup>
<col style="width: 19%" />
<col style="width: 35%" />
<col style="width: 45%" />
</colgroup>
<thead>
<tr>
<th>Code</th>
<th>Full Name</th>
<th>Drug Classes</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>MAC</strong></td>
<td>Medication Adherence for Cholesterol</td>
<td>Statins (Atorvastatin, Rosuvastatin, Simvastatin, Pravastatin,
Lovastatin, Pitavastatin)</td>
</tr>
<tr>
<td><strong>MAD</strong></td>
<td>Medication Adherence for Diabetes</td>
<td>Oral diabetes meds (Metformin, Glipizide, Sitagliptin,
Empagliflozin, Pioglitazone, Glimepiride)</td>
</tr>
<tr>
<td><strong>MAH</strong></td>
<td>Medication Adherence for Hypertension</td>
<td>ACE inhibitors, ARBs (Lisinopril, Losartan, Valsartan, Irbesartan,
Olmesartan, Benazepril)</td>
</tr>
</tbody>
</table>
<p><strong>Note:</strong> Each measure is tracked independently. A
patient may be compliant for MAC but non-compliant for MAH.</p>
<hr />
<h2 id="part-8-denominator-status-hedis-requirement">Part 8: Denominator
Status (HEDIS Requirement)</h2>
<p>HEDIS requires at least 2 prescription fills for a patient to be
included in the PDC denominator.</p>
<table>
<colgroup>
<col style="width: 18%" />
<col style="width: 18%" />
<col style="width: 21%" />
<col style="width: 40%" />
</colgroup>
<thead>
<tr>
<th>Code</th>
<th>Name</th>
<th>Fills</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>D0</strong></td>
<td>No Fills</td>
<td>0</td>
<td>Not in denominator - no fills this year</td>
</tr>
<tr>
<td><strong>D1a</strong></td>
<td>At-Risk</td>
<td>1</td>
<td>One fill, running low - urgent outreach for 2nd fill</td>
</tr>
<tr>
<td><strong>D1b</strong></td>
<td>Monitoring</td>
<td>1</td>
<td>One fill, adequate supply - monitor for 2nd fill</td>
</tr>
<tr>
<td><strong>D2</strong></td>
<td>In Denominator</td>
<td>2+</td>
<td>Two or more fills - full PDC tracking active</td>
</tr>
<tr>
<td><strong>DX</strong></td>
<td>Excluded</td>
<td>Any</td>
<td>Excluded from measure (hospice, ESRD, etc.)</td>
</tr>
</tbody>
</table>
<h3 id="critical-transition-d1---d2">Critical Transition: D1 -&gt;
D2</h3>
<p>Once a patient enters the denominator with their 2nd fill, their
<strong>entire treatment period</strong> (from first fill) is measured.
Delays between 1st and 2nd fill create early gap days that affect
year-end PDC.</p>
<hr />
<h2 id="part-9-operational-metrics">Part 9: Operational Metrics</h2>
<h3 id="days-to-runout">Days to Runout</h3>
<pre><code>Days to Runout = (Last Fill Date + Days Supply) - Today</code></pre>
<table>
<thead>
<tr>
<th>Range</th>
<th>Status</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr>
<td>&lt;= 0</td>
<td>Out now</td>
<td>Urgent</td>
</tr>
<tr>
<td>1-7</td>
<td>Urgent</td>
<td>Immediate action</td>
</tr>
<tr>
<td>8-14</td>
<td>Due Soon</td>
<td>Plan refill</td>
</tr>
<tr>
<td>&gt; 14</td>
<td>OK</td>
<td>Monitoring</td>
</tr>
</tbody>
</table>
<h3 id="pdc-projections">PDC Projections</h3>
<table>
<colgroup>
<col style="width: 30%" />
<col style="width: 34%" />
<col style="width: 34%" />
</colgroup>
<thead>
<tr>
<th>Metric</th>
<th>Formula</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td>PDC Status Quo</td>
<td>(Covered + min(Supply, DaysLeft)) / Treatment</td>
<td>What PDC will be if patient stops refilling today</td>
</tr>
<tr>
<td>PDC Perfect</td>
<td>(Covered + DaysToYearEnd) / Treatment</td>
<td>Best possible PDC with perfect adherence</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="part-10-validation-summary">Part 10: Validation Summary</h2>
<h3 id="validated-items">Validated Items</h3>
<table>
<colgroup>
<col style="width: 28%" />
<col style="width: 38%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr>
<th>Item</th>
<th>Status</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>PRD matches Golden Standard</td>
<td>VALIDATED</td>
<td>No conflicts found</td>
</tr>
<tr>
<td>Fragility tier thresholds</td>
<td>VALIDATED</td>
<td>Matches MetricsReference.jsx</td>
</tr>
<tr>
<td>Priority scoring formula</td>
<td>VALIDATED</td>
<td>Base + Bonus points correct</td>
</tr>
<tr>
<td>Refill/Renewal logic</td>
<td>VALIDATED</td>
<td>4 pathways confirmed (including APPOINTMENT_NEEDED)</td>
</tr>
<tr>
<td>Two-dimensional prioritization</td>
<td>VALIDATED</td>
<td>Urgency x Fragility matrix correct</td>
</tr>
</tbody>
</table>
<h3 id="document-status">Document Status</h3>
<ul>
<li><code>docs/planning/Medication_Adherence_Prioritization_Implementation.md</code>
is a <strong>FUTURE/PLANNING</strong> document</li>
<li>It contains proposed enhancements (propensity scoring, 6-dimension
urgency)</li>
<li>It is <strong>NOT</strong> the current authoritative spec</li>
<li>Current implementation should follow
<code>MetricsReference.jsx</code> only</li>
</ul>
<hr />
<h2 id="part-11-quick-reference-formulas">Part 11: Quick Reference
Formulas</h2>
<table>
<thead>
<tr>
<th>Metric</th>
<th>Formula</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>PDC</strong></td>
<td>Covered Days / Treatment Period x 100</td>
</tr>
<tr>
<td><strong>Treatment Period</strong></td>
<td>First Fill -&gt; December 31</td>
</tr>
<tr>
<td><strong>Gap Days Allowed</strong></td>
<td>Treatment Period x 20%</td>
</tr>
<tr>
<td><strong>Gap Days Used</strong></td>
<td>Treatment Period - Covered Days</td>
</tr>
<tr>
<td><strong>Gap Days Remaining</strong></td>
<td>Gap Days Allowed - Gap Days Used</td>
</tr>
<tr>
<td><strong>Delay Budget</strong></td>
<td>Gap Days Remaining / Refills Needed</td>
</tr>
<tr>
<td><strong>Days to Runout</strong></td>
<td>(Last Fill Date + Days Supply) - Today</td>
</tr>
<tr>
<td><strong>PDC Status Quo</strong></td>
<td>(Covered + min(Supply, DaysLeft)) / Treatment</td>
</tr>
<tr>
<td><strong>PDC Perfect</strong></td>
<td>(Covered + DaysToYearEnd) / Treatment</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="part-12-key-insights-for-engineering">Part 12: Key Insights for
Engineering</h2>
<ol type="1">
<li><p><strong>Out of meds != highest priority.</strong> A patient out
of meds with 30 gap days is lower priority than one with 3 days supply
and 2 gap days.</p></li>
<li><p><strong>Fragility predicts risk.</strong> F1-F2 patients can’t
afford any delays - one late refill tanks their PDC.</p></li>
<li><p><strong>2 fills minimum.</strong> Patients need 2+ fills to enter
the HEDIS denominator. Secure that 2nd fill!</p></li>
<li><p><strong>Q4 is critical.</strong> Less time to recover from gaps
as year-end approaches.</p></li>
<li><p><strong>The “Runway” Mental Model:</strong> Think of each patient
as a plane that needs to land (reach Dec 31 with 80% PDC). Their gap
budget is the “wiggle room” for delays.</p></li>
<li><p><strong>PDC only sees fills.</strong> Doctor writing a new Rx is
invisible to PDC. Only pharmacy fill dates matter.</p></li>
</ol>
<hr />
<h2 id="code-references">Code References</h2>
<table>
<thead>
<tr>
<th>Component</th>
<th>File Path</th>
</tr>
</thead>
<tbody>
<tr>
<td>Golden Standard</td>
<td><code>src/pages/MetricsReference.jsx</code></td>
</tr>
<tr>
<td>Fragility Service</td>
<td><code>src/services/fragilityTierService.js</code></td>
</tr>
<tr>
<td>Refill Worklist</td>
<td><code>src/pages/RefillWorklistPage.jsx</code></td>
</tr>
<tr>
<td>All Patients CRM</td>
<td><code>src/pages/AllPatientsCRM.jsx</code></td>
</tr>
<tr>
<td>Med Adherence Service</td>
<td><code>src/services/medAdherenceService.js</code></td>
</tr>
</tbody>
</table>
<hr />
<p><em>Document generated: January 3, 2026</em> <em>Validated against:
MetricsReference.jsx (Golden Standard)</em></p>
</body>
</html>
